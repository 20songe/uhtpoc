<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exercises - Installation Guide</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <img class="brand__mark" src="../assets/images/logo.svg"/>
        <div class="brand__text">
          <div class="brand__title">POC Hub</div>
          <div class="brand__subtitle">InterSystems IRIS for Health ‚Ä¢ Installation Guide</div>
        </div>
      </div>

      <nav class="quicklinks" aria-label="Quick links">
        <a class="chip" href="../index.html">Back to Home</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>IRIS for Health ‚Äì Installation Checklist (GCE)</h1>
      <p>
        Track setup and installation steps for InterSystems IRIS for Health on a Google Compute Engine VM.
        Checklist state is saved automatically in your browser.
      </p>
    </section>

    <!-- Prerequisites -->
    <section id="prereqs" class="section">
      <div class="section__header">
        <h2>System Prerequisites</h2>
        <p class="muted">Verify all requirements before starting installation.</p>
      </div>

      <details class="details details--accent" open>
        <summary>Prerequisites</summary>
        <div class="details__content">
          <h4>Required Files</h4>
          <ul class="bullets">
            <li>
              IRIS Installer:
              <code>~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar.gz</code>
            </li>
            <li>
              IRIS License Key:
              <code>~/iris.key</code>
            </li>
          </ul>

          <h4>System Requirements</h4>
          <ul class="bullets">
            <li>Ubuntu Linux 22.04 on Google Compute Engine (2 cores)</li>
            <li>Root or sudo access</li>
            <li>Network connectivity</li>
            <li>Inbound firewall rule allowing TCP port <strong>80</strong> (and optionally <strong>443</strong>)</li>
          </ul>

          <h4>Recommended (GCE)</h4>
          <ul class="bullets">
            <li>Enable ‚ÄúAllow HTTP traffic‚Äù on the VM or create a VPC firewall rule for TCP:80</li>
            <li>Ensure VM has an external IP (or use IAP / bastion) for access</li>
          </ul>
        </div>
      </details>
    </section>

    <!-- Pre-install -->
    <section id="preinstall" class="section">
      <div class="section__header">
        <h2>Pre-install</h2>
        <p class="muted">Provision the VM, update Ubuntu, install Apache, and upload the IRIS install kit.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-preinstall">

          <label class="checklist__item">
            <input type="checkbox" data-step="1" />
            <span>
              <strong>1.</strong> Create a Google Compute Engine VM (<strong><a target="_blank" href="https://www.youtube.com/watch?v=FLLnxIDPUMQ">click here for tutorial video</a></strong>):
              <ul class="bullets" style="margin-top:8px;">
                <li>Image: <strong>Ubuntu 22.04 LTS (x86_64)</strong></li>
                <li>Enable <strong>Allow HTTP traffic</strong> (or ensure a firewall rule exists for TCP:80)</li>
              </ul>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="2" />
            <span>
              <strong>2.</strong> Connect to the VM (SSH via Google Cloud Console or your SSH client).
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="3" />
            <span>
              <strong>3.</strong> Update the OS packages:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo apt update && sudo apt upgrade -y</code><br/><code>sudo snap refresh</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>4.</strong> Install Apache Web Server:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo apt install apache2 -y</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>5.</strong> Verify Apache Web Server is running:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo systemctl status apache2</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>6.</strong> Verify inbound access to Apache on port 80:
              <ul class="bullets" style="margin-top:8px;">
                <li>Confirm GCE firewall/VPC rule allows <strong>TCP:80</strong> to the VM</li>
                <li>Confirm Ubuntu firewall (if enabled) allows port 80</li>
                <li>Test by browsing: <code>http://&lt;VM_EXTERNAL_IP&gt;/</code></li>
              </ul>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="7" />
            <span>
              <strong>7.</strong> Upload the IRIS install kit to the VM:
              <div class="muted" style="margin-top:6px;">
                <pre><code>scp &lt;VM_EXTERNAL_IP&gt;:~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar.gz</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="8" />
            <span>
              <strong>8.</strong> Copy the license key file to the VM:
              <div class="muted" style="margin-top:8px;">
                <pre><code>scp iris.key &lt;VM_EXTERNAL_IP&gt;:~/</code></pre>
              </div>
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Install -->
    <section id="install" class="section">
      <div class="section__header">
        <h2>Install IRIS</h2>
        <p class="muted">Unpack, run pre-checker, then run the installer with your chosen owner/group.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-install">

          <label class="checklist__item">
            <input type="checkbox" data-step="1" />
            <span>
              <strong>1.</strong> Create a temporary kit directory:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo mkdir /tmp/iriskit</code><br/><code>sudo chmod og+rx /tmp/iriskit</code><br/><code>umask 022</code>
                </pre>
                
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="2" />
            <span>
              <strong>2.</strong> Unpack the install kit into <code>/tmp/iriskit</code>:
              <div class="muted" style="margin-top:8px;">
                <pre><code>gunzip -c ~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar.gz| ( cd /tmp/iriskit ; tar xf - )</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="3" />
            <span>
              <strong>3.</strong> Run the pre-checker:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo /tmp/iriskit/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64/irisinstall --prechecker</code></pre>
              </div>
              <div class="muted" style="margin-top:6px;">
                Install any missing dependencies as reported (e.g., openssl, zlib1g, CPU instruction support).
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="4" />
            <span>
              <strong>4.</strong> Confirm your user can <code>sudo</code> (or <code>su</code> to root),
              and decide the instance <strong>owner</strong> + <strong>group</strong> (cannot be changed after install).
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>5.</strong> Start the installer:
              <div class="muted" style="margin-top:8px;">
                <pre><code>sudo /tmp/iriskit/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64/irisinstall</code></pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>6.</strong> Installer prompts (recommended selections for this POC):
              <ul class="bullets" style="margin-top:8px;">
                <li>Instance name: press <strong>Enter</strong> to accept default (<code>IRISHEALTH</code>)</li>
                <li>Directory: press <strong>Enter</strong> to accept default (<code>/isc/IRISHEALTH</code>)</li>
                <li>Installation type: press <strong>Enter</strong> to accept default (&lt;1&gt; Development)</li>
                <li>Initial security settings: select <code>2</code> for Normal security</li>
                <li>What user should be the owner of this instance?: choose your system user</li>
                <li>Please enter the common password for _SYSTEM/Admin/SuperUser/superuser: enter and confirm your password</li>
                <li>Please enter the password for CSPSystem: enter and confirm your password</li>
                <li>What group should be allowed to start and stop this instance? : select your desired group</li>
                <li>Unicode Support: press <strong>Enter</strong> to accept default (Yes)</li>
                <li>Use existing web server to connect to installation: press <strong>Enter</strong> to accept default (Yes)</li>
                <li>Do you want to enter a license key?: select <code>Yes</code></li>
                <li>License key file: <code>~/iris.key</code></li>
                <li>Confirm InterSystems IRIS installation: press <strong>Enter</strong> to accept default (Yes)</li>
              </ul>
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Verify Management Portal -->
    <section id="license" class="section">
      <div class="section__header">
        <h2>Verify Installation</h2>
        <p class="muted">Verify access by logging into the Management Portal.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-license">
            
        <label class="checklist__item">
            <input type="checkbox" data-step="7" />
            <span>
                <strong>1.</strong> Open the Management Portal:
                <div class="muted" style="margin-top:8px;">
                <pre><code>http://&lt;VM_EXTERNAL_IP&gt;/csp/sys/UtilHome.csp</code></pre>
                </div>
            </span>
        </label>

        <label class="checklist__item">
        <input type="checkbox" data-step="3" />
        <span>
            <strong>2.</strong> Login as <code>superuser</code> / &lt;your chosen password&gt;.
        </span>
        </label>


          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>3.</strong> Confirm license status on the homepage says the instance is licensed to Unity Health Toronto.
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>

      <div class="card card--plain" style="margin-top:12px;">
        <details class="details">
          <summary>Congratulations üéâ</summary>
          <div class="details__content">
            IRIS for Health is installed and licensed on your Google Compute Engine VM.
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <span class="muted">IRIS Installation Checklist ‚Äî GCE</span>
      <span class="muted">Progress saved locally</span>
    </div>
  </footer>

  <script src="../assets/js/app.js"></script>
</body>
</html>
