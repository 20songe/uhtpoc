<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Exercises - Installation Guide</title>
  <link rel="stylesheet" href="../assets/css/styles.css" />
</head>
<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <div class="brand">
        <img class="brand__mark" src="../assets/images/logo.svg"/>
        <div class="brand__text">
          <div class="brand__title">POC Hub</div>
          <div class="brand__subtitle">InterSystems IRIS for Health ‚Ä¢ Installation Guide</div>
        </div>
      </div>

      <nav class="quicklinks" aria-label="Quick links">
        <a class="chip" href="../index.html">Back to Home</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <section class="hero">
      <h1>IRIS for Health ‚Äì Installation Checklist (GCE)</h1>
      <p>
        Track setup and installation steps for InterSystems IRIS for Health on a Google Compute Engine VM.
        Checklist state is saved automatically in your browser.
      </p>
    </section>

    <!-- Prerequisites -->
    <section id="prereqs" class="section">
      <div class="section__header">
        <h2>System Prerequisites</h2>
        <p class="muted">Verify all requirements before starting installation.</p>
      </div>

      <details class="details details--accent" open>
        <summary>Prerequisites</summary>
        <div class="details__content">
          <h4>Required Files</h4>
          <ul class="bullets">
            <li>
              IRIS Installer:
              <code>~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar</code>
            </li>
            <li>
              IRIS License Key:
              <code>~/iris.key</code>
            </li>
          </ul>

          <h4>System Requirements</h4>
          <ul class="bullets">
            <li>Ubuntu Linux 22.04 on Google Compute Engine</li>
            <li>Root or sudo access</li>
            <li>Network connectivity</li>
            <li>Inbound firewall rule allowing TCP port <strong>80</strong> (and optionally <strong>443</strong>)</li>
          </ul>

          <h4>Recommended (GCE)</h4>
          <ul class="bullets">
            <li>Enable ‚ÄúAllow HTTP traffic‚Äù on the VM or create a VPC firewall rule for TCP:80</li>
            <li>Ensure VM has an external IP (or use IAP / bastion) for access</li>
          </ul>
        </div>
      </details>
    </section>

    <!-- Pre-install -->
    <section id="preinstall" class="section">
      <div class="section__header">
        <h2>Pre-install</h2>
        <p class="muted">Provision the VM, update Ubuntu, install Apache, and upload the IRIS install kit.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-preinstall">

          <label class="checklist__item">
            <input type="checkbox" data-step="1" />
            <span>
              <strong>1.</strong> Create a Google Compute Engine VM:
              <ul class="bullets" style="margin-top:8px;">
                <li>Image: <strong>Ubuntu 22.04 LTS</strong></li>
                <li>Machine type sized for your POC</li>
                <li>Disk: adequate space for install + data</li>
                <li>Enable <strong>Allow HTTP traffic</strong> (or ensure a firewall rule exists for TCP:80)</li>
              </ul>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="2" />
            <span>
              <strong>2.</strong> Connect to the VM (SSH via Google Cloud Console or your SSH client).
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="3" />
            <span>
              <strong>3.</strong> Update the OS packages:
              <div class="muted" style="margin-top:8px;">
                <code>sudo apt update && sudo apt upgrade -y</code><br/>
                <code>sudo snap refresh</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="4" />
            <span>
              <strong>4.</strong> (If applicable) Ensure apt sources don‚Äôt reference a CD-ROM:
              <div class="muted" style="margin-top:8px;">
                <code>sudo nano /etc/apt/sources.list</code> and comment out any <code>cdrom</code> lines.
              </div>
              <div class="muted" style="margin-top:6px;">
                Then re-run: <code>sudo apt update</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>5.</strong> Install Apache Web Server:
              <div class="muted" style="margin-top:8px;">
                <pre>
                    <code>sudo apt update<br/>
                    sudo dpkg --configure -a<br/>
                    sudo apt -f install<br/>
                    sudo apt install apache2 -y<br/>
                    sudo systemctl status apache2</code>
                </pre>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>6.</strong> Verify inbound access to Apache on port 80:
              <ul class="bullets" style="margin-top:8px;">
                <li>Confirm GCE firewall/VPC rule allows <strong>TCP:80</strong> to the VM</li>
                <li>Confirm Ubuntu firewall (if enabled) allows port 80</li>
                <li>Test by browsing: <code>http://&lt;VM_EXTERNAL_IP&gt;/</code></li>
              </ul>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="7" />
            <span>
              <strong>7.</strong> Upload the IRIS install kit to the VM (GCE adaptation of ‚Äúmount shared folder‚Äù):
              <ul class="bullets" style="margin-top:8px;">
                <li>Option A: Upload via Cloud Console SSH file upload (if available)</li>
                <li>Option B: Use <code>gcloud compute scp</code> from your workstation</li>
                <li>Option C: Download from an internal artifact repo (if permitted)</li>
              </ul>
              <div class="muted" style="margin-top:6px;">
                Place the installer at: <code>~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="8" />
            <span>
              <strong>8.</strong> Ensure the license key file is present:
              <div class="muted" style="margin-top:8px;">
                <code>~/iris.key</code>
              </div>
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>
    </section>

    <!-- Install -->
    <section id="install" class="section">
      <div class="section__header">
        <h2>Install IRIS</h2>
        <p class="muted">Unpack, run pre-checker, then run the installer with your chosen owner/group.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-install">

          <label class="checklist__item">
            <input type="checkbox" data-step="1" />
            <span>
              <strong>1.</strong> Create a temporary kit directory:
              <div class="muted" style="margin-top:8px;">
                <code>sudo mkdir /tmp/iriskit</code><br/>
                <code>sudo chmod og+rx /tmp/iriskit</code><br/>
                <code>umask 022</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="2" />
            <span>
              <strong>2.</strong> Unpack the install kit into <code>/tmp/iriskit</code>:
              <div class="muted" style="margin-top:8px;">
                <code>tar -xf ~/IRISHealth-2025.1.2.374.0-lnxubuntu2204x64.tar -C /tmp/iriskit</code>
              </div>
              <div class="muted" style="margin-top:6px;">
                (If your kit is <code>.tar.gz</code>, use: <code>tar -xzf ...</code>)
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="3" />
            <span>
              <strong>3.</strong> Run the pre-checker:
              <div class="muted" style="margin-top:8px;">
                <code>sudo /tmp/iriskit/irisinstall --prechecker</code>
              </div>
              <div class="muted" style="margin-top:6px;">
                Install any missing dependencies as reported (e.g., openssl, zlib1g, CPU instruction support).
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="4" />
            <span>
              <strong>4.</strong> Confirm your user can <code>sudo</code> (or <code>su</code> to root),
              and decide the instance <strong>owner</strong> + <strong>group</strong> (cannot be changed after install).
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>5.</strong> Start the installer:
              <div class="muted" style="margin-top:8px;">
                <code>sudo /tmp/iriskit/irisinstall</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>6.</strong> Installer prompts (recommended selections for this POC):
              <ul class="bullets" style="margin-top:8px;">
                <li>Instance name: press Enter (default <code>IRISHEALTH</code>)</li>
                <li>Directory: <code>/isc/IRISHEALTH</code> ‚Üí Enter to create</li>
                <li>Installation type: Enter (1) Development</li>
                <li>Security mode: type <code>2</code> for Normal security</li>
                <li>Owner user: choose your system user (e.g., <code>superuser</code>)</li>
                <li>Set shared passwords: _SYSTEM/Admin/SuperUser/superuser</li>
                <li>Set CSPSystem password</li>
                <li>Start/stop group: select your desired group</li>
                <li>Unicode Support: Enter (Yes)</li>
                <li>Use existing web server: Enter (Yes)</li>
                <li>License key file: Enter (No license key file at install time)</li>
                <li>Confirm install: Enter (Yes)</li>
              </ul>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="7" />
            <span>
              <strong>7.</strong> Verify the Management Portal is reachable:
              <div class="muted" style="margin-top:8px;">
                <code>http://&lt;VM_EXTERNAL_IP&gt;/csp/sys/UtilHome.csp</code>
              </div>
              <div class="muted" style="margin-top:6px;">
                If you are using HTTPS or a different web gateway config, adjust the URL accordingly.
              </div>
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>
    </section>

    <!-- License -->
    <section id="license" class="section">
      <div class="section__header">
        <h2>Activate the License Key</h2>
        <p class="muted">Upload/activate <code>iris.key</code> in the Management Portal.</p>
      </div>

      <div class="card card--plain">
        <form class="checklist" data-checklist-id="iris-install-gce-license">

          <label class="checklist__item">
            <input type="checkbox" data-step="1" />
            <span>
              <strong>1.</strong> Confirm <code>iris.key</code> is on the VM:
              <div class="muted" style="margin-top:8px;">
                <code>ls -l ~/iris.key</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="2" />
            <span>
              <strong>2.</strong> Open the Management Portal:
              <div class="muted" style="margin-top:8px;">
                <code>http://&lt;VM_EXTERNAL_IP&gt;/csp/sys/UtilHome.csp</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="3" />
            <span>
              <strong>3.</strong> Login as <code>superuser</code> / your chosen password.
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="4" />
            <span>
              <strong>4.</strong> Navigate to:
              <div class="muted" style="margin-top:8px;">
                <code>System Administration ‚Üí Licensing ‚Üí License Key</code>
              </div>
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="5" />
            <span>
              <strong>5.</strong> Click <em>Activate New Key</em> ‚Üí <em>Browse</em> ‚Üí select <code>iris.key</code> ‚Üí <em>Apply</em> ‚Üí <em>Activate</em>.
            </span>
          </label>

          <label class="checklist__item">
            <input type="checkbox" data-step="6" />
            <span>
              <strong>6.</strong> Confirm license status shows as active and valid.
            </span>
          </label>

          <div class="checklist__actions">
            <button class="btn" type="button" data-reset-checklist>Reset section</button>
          </div>
        </form>
      </div>

      <div class="card card--plain" style="margin-top:12px;">
        <details class="details">
          <summary>Congratulations üéâ</summary>
          <div class="details__content">
            IRIS for Health is installed and licensed on your Google Compute Engine VM.
          </div>
        </details>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container footer__inner">
      <span class="muted">IRIS Installation Checklist ‚Äî GCE</span>
      <span class="muted">Progress saved locally</span>
    </div>
  </footer>

  <script src="../assets/js/app.js"></script>
</body>
</html>
